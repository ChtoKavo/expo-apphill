===================================================================
–°–¢–ê–¢–£–° –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô: "–î–≤–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ "–≤ —Å–µ—Ç–∏"
===================================================================

‚úÖ –ö–õ–ò–ï–ù–¢ - –í–°–ï –ì–û–¢–û–í–û

===================================================================
–°–ü–ò–°–û–ö –ò–ó–ú–ï–ù–ï–ù–ò–ô –ù–ê –ö–õ–ò–ï–ù–¢–ï:
===================================================================

1Ô∏è‚É£ src/services/globalSocket.js
   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è currentUserId –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è resetSocket() - –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç socket –ø—Ä–∏ —Å–º–µ–Ω–µ –∞–∫–∫–∞—É–Ω—Ç–∞
   ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ getOrCreateSocket() - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–º–µ–Ω—É user_id
   ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ disconnectSocket() - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ñ–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
   ‚úÖ Socket –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç query.user_id –∏ auth.user_id
   ‚úÖ –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è user_status —Å is_online: true

2Ô∏è‚É£ src/screens/LoginScreen.js
   ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω resetSocket()
   ‚úÖ handleLogin() - –≤—ã–∑—ã–≤–∞–µ—Ç resetSocket() –ü–ï–†–ï–î –≤—Ö–æ–¥–æ–º
   ‚úÖ handleGoogleLogin() - –≤—ã–∑—ã–≤–∞–µ—Ç resetSocket() –ü–ï–†–ï–î –≤—Ö–æ–¥–æ–º —á–µ—Ä–µ–∑ Google

3Ô∏è‚É£ src/screens/RegisterScreen.js
   ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω resetSocket()
   ‚úÖ handleRegister() - –≤—ã–∑—ã–≤–∞–µ—Ç resetSocket() –ü–ï–†–ï–î —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π

4Ô∏è‚É£ src/screens/ProfileScreen.js
   ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω disconnectSocket()
   ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã—Ö–æ–¥–∞ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞ - –≤—ã–∑—ã–≤–∞–µ—Ç disconnectSocket()

5Ô∏è‚É£ src/screens/ChatsListScreen.js
   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω useEffect –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —á–∞—Ç–æ–≤/–≥—Ä—É–ø–ø –ø—Ä–∏ —Å–º–µ–Ω–µ currentUser
   ‚úÖ –û—á–∏—â–∞—é—Ç—Å—è: chats, groups, typingUsers, groupTypingUsers
   ‚úÖ –£–∂–µ –±—ã–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö
   ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤: user_status_changed, user_online, user_offline

6Ô∏è‚É£ src/screens/ChatScreen.js
   ‚úÖ –£–¥–∞–ª–µ–Ω –±–ª–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ user_status –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
   ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω –±–ª–æ–∫ user_status –ø—Ä–∏ disconnect (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)

===================================================================
–ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢:
===================================================================

–°–¶–ï–ù–ê–†–ò–ô 1: –í—Ö–æ–¥ –ø–µ—Ä–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (ID=1)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ö–æ–¥–∏—Ç —Å –∞–∫–∫–∞—É–Ω—Ç–æ–º ID=1
2. resetSocket() –ø—Ä–æ–≤–µ—Ä—è–µ—Ç currentUserId
3. currentUserId –±—ã–ª null ‚Üí –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–π socket
4. getOrCreateSocket() —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π socket —Å query.user_id=1
5. Socket –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç authenticate_socket —Å user_id=1
6. –°–µ—Ä–≤–µ—Ä –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç socket –∫ user_id=1
7. ChatsListScreen –∑–∞–≥—Ä—É–∂–∞–µ—Ç —á–∞—Ç—ã –¥–ª—è user_id=1

–°–¶–ï–ù–ê–†–ò–ô 2: –í—Ö–æ–¥ –≤—Ç–æ—Ä–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (ID=2)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–æ–≥–∏–Ω–∏—Ç—Å—è —Å –Ω–æ–≤—ã–º –∞–∫–∫–∞—É–Ω—Ç–æ–º ID=2
2. LoginScreen –≤—ã–∑—ã–≤–∞–µ—Ç resetSocket()
3. resetSocket() –≤–∏–¥–∏—Ç currentUserId=1 ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç user_status —Å is_online:false
4. resetSocket() –æ—Ç–∫–ª—é—á–∞–µ—Ç —Å—Ç–∞—Ä—ã–π socket
5. AsyncStorage.setItem('user', ID=2)
6. ChatsListScreen –≤–∏–¥–∏—Ç —á—Ç–æ currentUser.id –∏–∑–º–µ–Ω–∏–ª—Å—è (1‚Üí2)
7. ChatsListScreen –æ—á–∏—â–∞–µ—Ç –í–°–ï —á–∞—Ç—ã (setChats([]))
8. getOrCreateSocket() –ø–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤—ã–π user_id=2
9. getOrCreateSocket() –≤–∏–¥–∏—Ç —á—Ç–æ currentUserId (1) !== –Ω–æ–≤—ã–π user_id (2)
10. getOrCreateSocket() –≤—ã–∑—ã–≤–∞–µ—Ç resetSocket() –µ—â–µ —Ä–∞–∑ (—É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Å—Ç–∞—Ä—ã–π –æ—Ç–∫–ª—é—á–µ–Ω)
11. getOrCreateSocket() —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π socket –¥–ª—è user_id=2
12. –ù–æ–≤—ã–π socket –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç authenticate_socket
13. –°–µ—Ä–≤–µ—Ä –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç socket –∫ user_id=2
14. ChatsListScreen –∑–∞–≥—Ä—É–∂–∞–µ—Ç —á–∞—Ç—ã –¥–ª—è user_id=2

–°–¶–ï–ù–ê–†–ò–ô 3: Logout
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞"
2. ProfileScreen –≤—ã–∑—ã–≤–∞–µ—Ç disconnectSocket()
3. disconnectSocket() –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç user_status —Å is_online:false
4. disconnectSocket() –≤—ã–∑—ã–≤–∞–µ—Ç resetSocket()
5. Socket –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è
6. AsyncStorage.clear()
7. navigation.replace('Login')

===================================================================
–ß–¢–û –ù–£–ñ–ù–û –ù–ê –°–ï–†–í–ï–†–ï:
===================================================================

‚ö†Ô∏è –°–ï–†–í–ï–† –î–û–õ–ñ–ï–ù:

1. –•—Ä–∞–Ω–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥: user_id ‚Üí Set<socket_id>
2. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å authenticate_socket event
3. –ü—Ä–∏ disconnect –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è socket'–æ–≤
4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å user_status_changed –¢–û–õ–¨–ö–û –∫–æ–≥–¥–∞:
   - –≠—Ç–æ –ø–µ—Ä–≤—ã–π socket –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (is_online: true)
   - –ò–õ–ò —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π socket (is_online: false)

üìÑ –î–µ—Ç–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å–º. –≤: SERVER_FIXES_REQUIRED.md

===================================================================
–ü–†–û–í–ï–†–ö–ê:
===================================================================

–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ. –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –¥–≤–∞ –±—Ä–∞—É–∑–µ—Ä–∞/—ç–º—É–ª—è—Ç–æ—Ä–∞
2. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç A –Ω–∞ –ø–µ—Ä–≤–æ–º
3. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç B –Ω–∞ –≤—Ç–æ—Ä–æ–º
4. –í ChatsListScreen –∞–∫–∫–∞—É–Ω—Ç–∞ A –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
5. –í—ã–π–¥–∏—Ç–µ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞ A
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∞–∫–∫–∞—É–Ω—Ç A –±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ "–≤ —Å–µ—Ç–∏"

===================================================================
